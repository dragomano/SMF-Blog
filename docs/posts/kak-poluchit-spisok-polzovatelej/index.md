---
title: Список пользователей с требуемым разрешением
description: Как получить массив пользователей с конкретным правом доступа на форуме SMF?
date: 2018-11-30
slug: kak-poluchit-spisok-polzovatelej
authors: [bugo]
tags: [пользователи, разрешения]
categories: [lessons]
---

Иногда требуется узнать идентификаторы пользователей с заданными полномочиями на форуме. Делается в несколько строк.

<!-- more -->

## Как найти

Нужная функция находится в `/Sources/Subs-Members.php` и называется **membersAllowedTo**:

```php
<?php

/**
 * Получает список пользователей, которым разрешено указанное разрешение
 * @param string $permission Имя разрешения (например, 'post_new')
 * @param int|null $board_id ID раздела (если нужны права внутри раздела)
 * @return array Массив с идентификаторами пользователей
 */
function membersAllowedTo(string $permission, ?int $board_id = null): array
```

Функция:
- Получает список пользователей, которым разрешено указанное разрешение.
- Если указан board_id, проверка будет произведена только внутри соответствующего раздела.
- Учитывает настройки имеющихся прав доступа.
- Принимает во внимание модераторов.
- Возвращает массив с идентификаторами пользователей.

## Пример использования

```php
<?php

global $sourcedir;

require_once($sourcedir . '/Subs-Members.php');

// Получить всех пользователей с правом "post_new"
$members = membersAllowedTo('post_new');

// Или только пользователей с правом внутри раздела #1
$members = membersAllowedTo('post_new', 1);
```

Как видите, дополнительным параметром указывается идентификатор нужного раздела.

{{ info('В табличной форме увидеть разрешения разных групп пользователей можно с помощью генератора отчётов (раздел _Основные настройки_).', 'Полезно знать') }}
