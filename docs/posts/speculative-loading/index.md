---
title: Speculative Loading
long_title: Speculative Loading - предварительная загрузка ссылок
description: Используем SpeculationRules API для ускорения загрузки страниц на форуме SMF.
date: 2025-06-03
tags: [оптимизация, SMF 2.1]
categories: [translations]
---

Настройка предварительной загрузки страниц форума в целях оптимизации.

<!-- more -->

**Предварительная загрузка (Speculative Loading)** оптимизирует обработку ссылок для ускорения загрузки страниц. Она может активироваться при наведении курсора (для ранней предзагрузки) или по клику (для точной навигации).

### Как это работает

Система предварительно загружает ресурсы страницы в фоновом режиме до явного запроса пользователя, ускоряя навигацию и сокращая время ожидания последующих загрузок.

### Область применения

В текущей версии функция работает только с:

- недавними сообщениями,
- разделами,
- темами,
- ссылками постраничной навигации.

### Поддержка браузеров

**Поддерживаются:** Chrome, Edge, Opera (≈70% мирового рынка браузеров).

Браузеры без поддержки просто игнорируют правила без каких-либо побочных эффектов.

### Важно

- [SpeculationRules API](https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API) — экспериментальная технология с передовой функциональностью, которая может изменяться.
- Совместимо с SEF и Pretty URLs.

{{ img('Вот как это выглядит', 'speculative_loading.png') }}

### Возможности

* **Prefetch (по умолчанию)** Загружает все необходимые ресурсы страницы в фоне. **Безопаснее для авторизованных пользователей** — скачивает страницу без выполнения скриптов.
* **Prerender** Делает то же, что и Prefetch, но дополнительно полностью рендерит страницу. **Используйте на свой риск.**
* **Активация по наведению (по умолчанию)** Улучшает воспринимаемую скорость, начиная загрузку до клика.
* **Активация по клику** Может ощущаться медленнее, но предотвращает преждевременную загрузку контента.

{{ download('https://custom.simplemachines.org/index.php?mod=4431') }}

??? Русификация

    Добавить файл `Themes\default\languages\Speculative.russian.php`:

    ```php
    <?php

    // Speculative for SMF
    $txt['speculative_title'] = 'Правила предварительной загрузки';
    $txt['speculative_desc'] = 'Этот мод позволяет настроить обработку ссылок для ускорения открытия страниц.';

    $txt['speculative_enabled'] = 'Включить предварительную загрузку';
    $txt['speculative_enabled_desc'] = '<br>';

    $txt['speculative_mode'] = 'Режим предзагрузки';
    $txt['speculative_prefetch'] = 'Prefetch (предварительная загрузка ресурсов)';
    $txt['speculative_prerender'] = 'Prerender (предварительный рендеринг)';
    $txt['speculative_mode_desc'] = 'Режим «Prefetch» загружает необходимые ресурсы страницы в фоне, а «Prerender» идет дальше, полностью загружая и отрисовывая страницу до перехода пользователя. «Prefetch» безопаснее для авторизованных пользователей.';

    $txt['speculative_eagerness'] = 'Условие активации';
    $txt['speculative_moderate'] = 'При наведении';
    $txt['speculative_conservative'] = 'При клике';

    $txt['speculative_eagerness_desc'] = 'Наведение улучшает воспринимаемую скорость загрузки, так как страница начинает грузиться до клика. Клик может ощущаться медленнее, но предотвращает преждевременную загрузку контента.';

    $txt['speculative_include'] = 'Какие дополнительные URL следует включить? Разрешены только внутренние ссылки. Указывайте по одному URL в строке.';
    ```
