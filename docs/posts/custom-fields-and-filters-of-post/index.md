---
title: Custom fields and filters of post
long_title: Custom fields and filters of post - настраиваемые поля и фильтры сообщений
description: Как создать дополнительные поля для сообщений форума на движке SMF.
date: 2014-05-13
tags: [SMF 2.0, поля, фильтр, сообщения, картотека]
categories: [translations]
---

Настраиваемые поля и фильтры сообщений. Как добавить кучу параметров и не превратить форум в Excel.

<!-- more -->

{{ img('Страница настроек мода', 'custom_fields_and_filters_of_post.png') }}

## Особенности

- Возможность создать группу полей и поля разного типа:
  - Текст
  - Текстовая область
  - Список
  - Комбинированный список
  - Переключатели
  - Флажки
  - Логический
- Настройка каждого поля в отдельности.
- Отображение полей в сообщениях.
- Фильтрация полей.
- Поиск по базе добавленных полей.

## Инструкция

Предположим, у нас есть сообщество, в котором обсуждаются разные движки для создания форумов, и мы хотим иметь набор карточек с особенностями каждого форума. Данная модификация поможет создать такие карточки и затем использовать их при создании новых сообщений.

Итак, для начала создадим раздел, в котором будут размещаться наши темы: «_Форумные движки_».

Затем создадим несколько групп настраиваемых полей в панели администрирования мода. В свойствах каждой создаваемой группы обязательно укажите созданный ранее раздел («Форумные движки»). Галочку «Показывать в ответах темы» везде отключаем.

1. **Форум** — группа типа «данные» для хранения особенностей конкретного форума (название, аббревиатура, разработчик, версия и т. п.). Предоставим разрешение на поиск в этой группе, чтобы создать страницу поиска по форумным движкам. Используем эту группу для отображения счётчика информации о пользователе, списка профилей и десятки лучших авторов (нужно поставить соответствующие галочки в блоке «Настройки для типа „Данные“»). Не забудем и про галочку «Показывать в первом сообщении темы». Остальные параметры изменять не обязательно.

Добавим в эту группу несколько полей: _Название_ (текст), _Аббревиатура_ (текст), _Разработчик_ (текст), _Последняя версия_ (текст), _Язык программирования_ (комбинированный список из трёх вариантов: Java, PHP, Perl), _Сайт_ (текст). В свойствах каждого поля (кроме «Аббревиатура») поставим галочку «Не пустое значение» — то есть сделаем их обязательными для заполнения, а также «Показывать в списках данных» (вариант «Да, в столбце только с этим полем»).

{{ img('Пример сообщения с заполненными полями', 'custom_fields_and_filters_of_post_message.png') }}

P. S. Обратите внимание, что при заполнении полей в группе типа «данные» вводить какую-либо дополнительную информацию непосредственно в текст сообщения не обязательно, модификация автоматически подставит туда точку («.»). Заполненные поля и будут представлять собой тело сообщения.

2. **CMS**: группа обычных полей для хранения сообщений с единственной записью, сигнализирующей о том, содержит сообщение данные о конкретном форуме или относится к системе управления контентом. Не забудем предоставить разрешение на поиск и в этой группе.

Создадим в этой группе поле с аналогичным названием. Тип — логический. Поставим галочку «Показывать в списке сообщений».

{{ img('Пример поиска по данным', 'custom_fields_and_filters_of_post_search.png') }}

3. **Фильтры**: группа типа «фильтры» для использования предустановленных фильтров в списке сообщений и на странице поиска. В блоке «Фильтры и настройки поиска» отметим всё, кроме «Форум». Дадим необходимые разрешения для просмотра.

{{ img('Пример индекса тем внутри раздела', 'custom_fields_and_filters_of_post_message_index.png') }}

4. **Комментарии**: группа типа «поля с несколькими значениями», позволяющая пользователям оставлять свои отзывы о каждом форумном движке, не создавая ответов в темах. Группа будет отображаться в нижней части всех страниц темы и будет содержать два поля: «_Мне нравится!_» (логический тип) и «_Комментарий_» (текстовая область). Отметим поля и группу для отображения специального списка в Центре модерации.

5. **Статистика**: группа типа «поля с несколькими значениями» для сбора статистических данных (нравится или нет тот или иной движок). Группа будет отображаться в конце всех страниц темы и будет иметь только одно поле с вопросом: «_Вам нравится этот движок?_». Три варианта ответов: 0 — Нет, 1 — Частично, 2 — Да. Не забудьте поставить галочку «Не пустое значение» (что сделает вопрос обязательным).

В свойствах этой группы обязательно отметьте параметры «Показывать статистику в сообщении» (проставить все галочки), «Показывать статистику внутри разделов» (галочки «Среднее значение» и «Количество значений» в блоке «Показывать сводку») и «Использовать статистику для упорядочивания списка сообщений» (галочки «Среднее значение» и «Количество значений»).

{{ img('Пример блока статистики', 'custom_fields_and_filters_of_post_statistics.png') }}

{{ download('https://custom.simplemachines.org/index.php?mod=3818') }}
{{ translation('https://drive.proton.me/urls/ZH8WR4J4ER#ydpXunoTGDye') }}
